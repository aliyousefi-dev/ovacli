<dialog id="my_modal_2" class="modal text-base-content">
    <div class="modal-box p-3 max-h-[80vh] overflow-y-hidden flex flex-col gap-5">
        <!-- Search Input -->
        <label class="input w-full focus:outline-none">
            <i class="bx bx-search bx-xs"></i>
            <input autocomplete="off" #searchInput id="searchModalInput2" type="search" class="grow py-2"
                placeholder="Search" [(ngModel)]="query" (input)="onInput()" (keydown.enter)="onEnter()" />
        </label>

        <!-- Loading Spinner -->
        @if (loading) {
        <div class="flex justify-center py-5">
            <span class="loading loading-spinner loading-xs"></span>
        </div>
        }

        <!-- Search Results -->
        @if (!loading && searchResults.suggestions.length > 0) {
        <div class="py-5 overflow-y-auto flex-1 w-full">
            @for ( result of searchResults.suggestions; track $index) {
            <a (click)="CloseModal()" [routerLink]="['/search']" [queryParams]="{ q: result }" class="btn w-full">
                <div class="flex justify-between items-center w-full gap-2">
                    <div class="flex items-center justify-start gap-2 flex-1 min-w-0">
                        <i class='bx bx-play-circle bx-xs'></i>
                        <div class="truncate text-start min-w-0">
                            {{ result }}
                        </div>
                    </div>
                    <span class="flex-shrink-0">↩︎</span>
                </div>
            </a>

            }
        </div>
        }

        <!-- No Results Found Message -->
        @if (!loading && searchResults.suggestions.length === 0) {
        <div class="py-5">
            <span>No results found for "{{ query }}"</span>
        </div>
        }

        <!-- See All Results Link -->
        <div class="w-full flex justify-center pt-4">
            <a href="#">Total Results {{ searchResults.suggestions.length }}</a>
        </div>

        <!-- Keyboard Shortcuts -->
        <div class="flex items-center gap-4 flex-wrap">
            <div class="flex gap-1">
                <kbd class="kbd">↓</kbd>
                <kbd class="kbd">↑</kbd>
                <span>Navigate</span>
            </div>
            <div class="flex gap-1">
                <kbd class="kbd">↵</kbd>
                <span>Select</span>
            </div>
            <div class="flex gap-1">
                <kbd class="kbd">Esc</kbd>
                <span>Close</span>
            </div>
        </div>
    </div>

    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>